<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Get Key Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  background: url("https://d.top4top.io/p_3665on19b0.png") no-repeat center center fixed;
  background-size: cover;
  color: #e5e7eb;
  font-family: Arial, sans-serif;
  text-align: center;
  padding-top: 90px;
}
button {
  padding:12px 28px;
  font-size:16px;
  border:none;
  border-radius:10px;
  background:#38bdf8;
  cursor:pointer;
}
button:disabled {
  background:#475569;
  cursor:not-allowed;
}
pre {
  margin-top:20px;
  background:#020617cc;
  padding:15px;
  border-radius:8px;
  word-break:break-all;
}
</style>
</head>

<body>

<h2>üîê GET KEY PREMIUM</h2>
<p>
1 Device ‚Ä¢ Berlaku 24 Jam<br>
Halaman ini hanya bisa dibuka lewat link resmi
</p>

<button id="btn">GET KEY PREMIUM</button>
<pre id="out"></pre>

<script>
// ================================
// üîí PROTEKSI WAJIB LEWAT SFL
// ================================
const params = new URLSearchParams(window.location.search);

// Jika tidak lewat SFL ‚Üí TOLAK
if (!params.has("from") || params.get("from") !== "sfl") {
  document.body.innerHTML =
    "<h2>‚ùå AKSES DITOLAK</h2><p>Silakan buka lewat link resmi</p>";
  throw new Error("Blocked access");
}

// Cegah refresh / buka ulang
if (sessionStorage.getItem("VISITED")) {
  document.body.innerHTML =
    "<h2>‚õî AKSES DIBLOKIR</h2><p>Silakan lewat link SFL ulang</p>";
  throw new Error("Reload blocked");
}
sessionStorage.setItem("VISITED", "1");

// =====================
// üîë KEY MANUAL
// =====================
const KEY_LIST = [
  "KEY-ADMIN-001",
  "KEY-ADMIN-002",
  "KEY-ADMIN-003",
  "KEY-ADMIN-004",
  "KEY-ADMIN-005"
];

const EXPIRE_TIME = 24 * 60 * 60 * 1000;

// =====================
// üîê DEVICE ID
// =====================
function getDeviceId() {
  let id = localStorage.getItem("DEVICE_ID");
  if (!id) {
    id = "DEV-" + crypto.randomUUID();
    localStorage.setItem("DEVICE_ID", id);
  }
  return id;
}

const deviceId = getDeviceId();
const STORAGE_KEY = "KEY_" + deviceId;

const btn = document.getElementById("btn");
const out = document.getElementById("out");

// Cek key lama
const saved = localStorage.getItem(STORAGE_KEY);
if (saved) {
  const data = JSON.parse(saved);
  if (Date.now() < data.expired) {
    showKey(data.key, data.expired);
    btn.disabled = true;
  } else {
    localStorage.removeItem(STORAGE_KEY);
  }
}

btn.onclick = () => {
  if (btn.disabled) return;

  const randomKey =
    KEY_LIST[Math.floor(Math.random() * KEY_LIST.length)];

  const expiredAt = Date.now() + EXPIRE_TIME;

  localStorage.setItem(
    STORAGE_KEY,
    JSON.stringify({ key: randomKey, expired: expiredAt })
  );

  showKey(randomKey, expiredAt);
  btn.disabled = true;
};

function showKey(key, expired) {
  out.textContent =
    "KEY ANDA:\n" + key +
    "\n\nExpired:\n" +
    new Date(expired).toLocaleString();
}
</script>

</body>
</html>
